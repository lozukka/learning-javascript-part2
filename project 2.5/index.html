<!DOCTYPE html>
<html>
  <body>
    <h2>LocalStorage - esimerkki</h2>
    <input id="input" type="text" placeholder="Kirjoita jotain" />
    <button id="save">Tallenna</button>
    <button id="clear">Tyhjennä</button>

    <h3>Historia</h3>
    <ul id="history"></ul>

    <script>
      let historyList = [];
      let historyDisplay = document.getElementById("history");
      let saveBtn = document.getElementById("save");
      let clearBtn = document.getElementById("clear");
      let input = document.getElementById("input");

      // Kun käyttäjä painaa "Tallenna"
      saveBtn.addEventListener("click", () => {
        let text = input.value;
        if (text.trim() === "") return; // tyhjää ei tallenneta

        historyList.push(text); //tieto pusketaan dataan
        saveHistory(); //tieto tallennetaan storageen
        renderHistoryItem(text); //tieto tulostetaan sivulle
        input.value = "";
      });

      // Kun käyttäjä painaa "Tyhjennä"
      clearBtn.addEventListener("click", () => {
        historyList = []; //data tyhjätään
        historyDisplay.textContent = ""; //tiedot tyhjätään sivulta
        saveHistory(); //tallennetaan storageen tyhjä tieto
      });

      function saveHistory() {
        localStorage.setItem("myHistory", JSON.stringify(historyList)); //tieto tallennetaan JSON string muodossa
      }

      function loadHistory() {
        const saved = localStorage.getItem("myHistory");
        if (saved) {
          historyList = JSON.parse(saved); //JSON string muoto puretaan
          historyList.forEach((item) => renderHistoryItem(item)); //jokainen itemi tulostetaan sivulle kerrallaan
        }
      }

      function renderHistoryItem(text) {
        let li = document.createElement("li");
        li.textContent = text;
        historyDisplay.appendChild(li);
      }

      // Lataa sivun avautuessa vanhat tiedot
      window.addEventListener("load", loadHistory);
    </script>
  </body>
</html>
